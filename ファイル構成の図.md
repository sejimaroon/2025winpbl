# ファイル構成

```
src/
├── app/
│   ├── actions/
│   │   ├── admin.ts        # 管理者用処理（ユーザー承認など）
│   │   ├── auth.ts         # ログイン/ログアウト/新規登録処理
│   │   ├── diary.ts        # 日報取得・投稿・編集・削除・ステータス更新
│   │   ├── points.ts       # ポイント履歴取得・今月のポイント計算
│   │   ├── profile.ts      # プロフィール更新（名前・メール・パスワード）
│   │   ├── ranking.ts      # ランキング取得（フィルター対応）
│   │   └── staff.ts        # スタッフ一覧取得（メンション用）
│   │
│   ├── admin/
│   │   └── page.tsx        # 管理者ページ（ユーザー承認）
│   │
│   ├── login/
│   │   └── page.tsx        # ログイン/新規登録ページ
│   │
│   ├── mypage/
│   │   └── page.tsx        # マイページ（プロフィール・ポイント履歴）
│   │
│   ├── points/
│   │   └── page.tsx        # ポイント詳細ページ
│   │
│   ├── post/
│   │   └── page.tsx        # 新規投稿ページ
│   │
│   ├── ranking/
│   │   └── page.tsx        # ランキングページ
│   │
│   ├── register/
│   │   └── page.tsx        # 新規登録ページ（別ルート）
│   │
│   ├── globals.css         # グローバルスタイル（Tailwind CSS）
│   ├── layout.tsx          # ルートレイアウト
│   └── page.tsx            # トップページ（日報一覧）
│
├── components/
│   ├── diary/
│   │   ├── CategoryBadge.tsx      # カテゴリバッジ
│   │   ├── DateNavigator.tsx      # 日付ナビゲーション
│   │   ├── DiaryCard.tsx          # 日報カード（メイン表示）
│   │   ├── DiaryDetailModal.tsx   # 日報詳細・編集モーダル
│   │   ├── DiaryList.tsx          # 日報リスト（サーバーコンポーネント）
│   │   ├── DiaryListClient.tsx    # 日報リスト（クライアントコンポーネント）
│   │   ├── FloatingActionButton.tsx # 新規投稿ボタン（FAB）
│   │   ├── MentionButton.tsx      # メンション（@）ボタン
│   │   ├── MentionInput.tsx       # メンション入力コンポーネント
│   │   ├── StatusBadge.tsx        # ステータスバッジ
│   │   └── UserInitial.tsx        # ユーザーイニシャル表示
│   │
│   ├── layout/
│   │   └── Header.tsx             # ヘッダー（ナビゲーション・設定メニュー）
│   │
│   └── ui/
│       ├── Button.tsx             # ボタンコンポーネント
│       ├── Card.tsx               # カードコンポーネント
│       ├── Input.tsx              # 入力フィールド
│       ├── Select.tsx             # セレクトボックス
│       ├── Switch.tsx             # スイッチ（トグル）
│       └── Textarea.tsx           # テキストエリア
│
├── lib/
│   ├── supabase/
│   │   ├── client.ts              # クライアントサイド用Supabaseクライアント
│   │   ├── middleware.ts          # ミドルウェア用Supabaseクライアント
│   │   └── server.ts              # サーバーサイド用Supabaseクライアント
│   └── utils.ts                   # ユーティリティ関数（日付フォーマット等）
│
├── types/
│   └── database.types.ts          # TypeScript型定義
│
└── middleware.ts                  # Next.js認証ミドルウェア
```

## 主要な機能

### ページ一覧

| パス | 説明 |
|------|------|
| `/` | トップページ（日報一覧） |
| `/login` | ログイン・新規登録 |
| `/post` | 新規日報投稿 |
| `/mypage` | マイページ（プロフィール・ポイント） |
| `/points` | ポイント詳細・履歴 |
| `/ranking` | ポイントランキング |
| `/admin` | 管理者ページ（ユーザー承認） |

### Server Actions一覧

| ファイル | 主要な関数 |
|----------|------------|
| `auth.ts` | `login`, `logout`, `signUp` |
| `diary.ts` | `getDiariesByDate`, `createDiary`, `updateDiary`, `deleteDiary`, `updateUserDiaryStatus`, `getCurrentStaff` |
| `admin.ts` | `getPendingStaff`, `approveStaff` |
| `points.ts` | `getPointHistory`, `getMonthlyPoints` |
| `profile.ts` | `updateProfile`, `updatePassword`, `updateStaffByAdmin` |
| `ranking.ts` | `getRanking`, `getCategoriesForRanking` |
| `staff.ts` | `getActiveStaff` |
